# CMA I\_0550 28\_TS\_010\_019\_AZ\_IPS\_Open\_Banking\_REST\_API\_specification

IPS/X provides REST APIs for the following open banking account information services:

Before submitting account information request customer must register account access consent that allows access to customer account information. Registered consent is used in subsequent accounts information requests.

In addition to account information services OBIS allows to perform payment initiation pre-authorization by sending request to debtor bank, sending request for customer account registration in CAS, QR code processing status notification, etc..

IPS/X provides REST API to get accounts information (account details, balances and transactions), the process is described below:

**Description**

Request to register a consent

**Method**

POST

**URL**

{HOST}/account-access-consents

**Request headers**

Content-type

application/json

Charset

UTF-8

Authorization

Basic

**Header parameters**

**Field**

**Type**

**Required**

**Description**

Sender-Participant-Code

String

false

BIC/Pseudo-BIC of sending participant

Receiver-Participant-Code

String

true

BIC/Pseudo-BIC of receiving participant

PSU-Device-ID-Type

String

true

UUID (Universally Unique Identifier) type for a device, which is used by the customer type. Supported values are:

* IMEI
* TERMINAL
* WEB
* MERCHANT

PSU-Device-ID

String

true

UUID (Universally Unique Identifier) for a device, which is used by the customer

PSU-IP-Address

String

true

IP address of a device, which is used by the customer

PSU-ID

String

true

The national identity number of the customer

PSU-ID-Type

String

true

National identity type:

* PIN - Personal Identification number
* TIN - Tax Identification Number

**Body**

**{**

"Data"**:** **{**

"Accounts"**:** **\[**

**{**

"SchemeName"**:** "IBAN"**,**

"Identification"**:** "AZ29VTBA00000000000160209170"

**}**

**],**

"Permissions"**:** **\[**

"ReadBalances"**,**

"ReadTransactionsDetails",

"InitiatePayment"

**],**

"ExpirationDateTime"**:** "2017-05-02T00:00:00+00:00"

**}**

**}**

**Body description**

**Field**

**Type**

**Required**

**Description**

Data/Accounts

Error: Reference source not found

false

Accounts for consent (in case account is empty consent will be submitted for all customer accounts)

Data/Permissions

Error: Reference source not found

true

Whether consent allows to:

* Get account details;
* Get account balance;
* Get list of account transactions;
* Initiate payment.

Data/ExpirationDateTime

DateTime

false

Specified date and time the permissions will expire.\
If not provided then consent is valid for lifetime.

**Response type**

**200**

Success response

**400**

Error response

**Success response**

**{**

"Data"**:** **{**

"ConsentId"**:** "XXXXAZ22-990000862471854-210209-21519"**,**

"Status"**:** "Authorisation"**,**

"StatusUpdateDateTime"**:** "2017-05-02T00:00:00+00:00"**,**

"CreationDateTime"**:** "2017-05-02T00:00:00+00:00"**,**

"Permissions"**:** **\[**

"ReadAccountsDetails"**,**

"ReadBalances"**,**

"ReadTransactionsDetails",

"InitiatePayment"

**],**

"ExpirationDateTime"**:** "2017-08-02T00:00:00+00:00"

**},**

"MobileNumber"**:** "994558228499"**,**

"Links"**:** **{**

"Self"**:** **{**"href"**:** "/account-access-consents/88379"**},**

"AuthoriseConsent"**:** **{**"href"**:** "/account-access-consents/88379/authorisations/994558228499"**}**

**}**

**}**

**Success response description**

**Field**

**Type**

**Required**

**Description**

Data/ConsentId

String

true

Consent unique identification generated by account owner participant (i.e. UUID)

Consent must be complex and unique. Recommendation for consent generation:\
{Sender-Participant-Code} - {DEVICE ID} - {DATETIME} - {SEQUENCE NUMBER}

E.g.: IBAZAZ20-990000862471854-210209-21519

Please consider that, the generated string will be:

8d5922510ae92e33e9aa78f7ae845ef2

Data/Status

String

true

Consent status.

Available values:

* Active;
* Authorisation;
* Rejected;
* Revoked.

Data/StatusUpdateDateTime

DateTime

true

Date and time at which the resource status was updated.

Data/CreationDateTime

DateTime

true

Date and time at which the resource was created.

Data/Permissions

Error: Reference source not found

true

Whether consent allows to:

* Get account balance;
* Get account details;
* Get list of account transactions;
* Initiate payment.

or

* Initiate payment with additional OTP authentication

ExpirationDateTime

DateTime

false

Specified date and time the permissions will expire.\
If this is not populated, the permissions will be never expired.

MobileNumber

String

false

Mobile number (12 digits) to which OTP was sent for authorization

Links

Links array

true

Consent links:

* Self – link for created consent (used in case of deletion of consent)
* AuthoriseConsent – for consent authorization.

**Error response**

**{**

"ErrorCode"**:** "ACCOUNT\_INVALID"**,**

"Description"**:** "Account was not found in the system"

**}**

**Error response description**

**Field**

**Type**

**Required**

**Description**

ErrorCode

String

true

Error code

Description

String

false

Error description

**Description**

Request to get account balance

**Method**

GET

**URL**

{HOST}/accounts/{AccountId}/balances

**URL variables**

**Variable**

**Description**

AccountId

Account identification

**Request headers**

Content-type

application/json

Charset

UTF-8

Authorization

Basic

**Header parameters**

**Field**

**Type**

**Required**

**Description**

Sender-Participant-Code

String

false

BIC/pseudoBIC of sending participant

Receiver-Participant-Code

String

true

BIC/pseudoBIC of receiving participant

PSU-Device-ID-Type

String

true

UUID (Universally Unique Identifier) type for a device, which is used by the customer type. Supported values are:

* IMEI
* TERMINAL
* WEB
* MERCHANT

PSU-Device-ID

String

true

UUID (Universally Unique Identifier) for a device, which is used by the customer, i.e. IMEI value of mobile phone

PSU-IP-Address

String

true

IP address of a device, which is used by the customer

Consent-ID

String

true

Consent identification

**Response type**

**200**

Success response

**400**

Error response

**Success response**

**{**

"Data"**:** **{**

"Balance"**:** **\[**

**{**

"AccountId"**:** "AZ29VTBA00000000000160209170"**,**

"Amount"**:** **{**

"Amount"**:** "1230.00"**,**

"Currency"**:** "AZN"

**},**

"CreditDebitIndicator"**:** "Credit"**,**

"Type"**:** "InterimAvailable"**,**

"DateTime"**:** "2017-04-05T10:43:07+00:00"**,**

"CreditLine"**:** **\[**

**{**

"Included"**:** true,

"Amount"**:** **{**

"Amount"**:** "1000.00"**,**

"Currency"**:** "AZN"

**},**

"Type"**:** "Pre-Agreed"

**}**

**]**

**}**

**]**

**},**

"Links"**:** **{**

"Self"**:** **{**"href"**:** "/accounts/22289/balances"**}**

**}**

**}**

**Response description**

**(success)**

**Field**

**Type**

**Required**

**Description**

Data/Balance

Error: Reference source not found

true

Balance information

Links

Links array

false

Links:

* Self – direct link to account balance.

**Error response**

**{**

"ErrorCode"**:** "CONSENT\_INVALID"**,**

"Description"**:** "Consent does not exist"

**}**

**Response description**

**(error)**

**Field**

**Type**

**Required**

**Description**

ErrorCode

String

true

Error code

Description

String

false

Error description
