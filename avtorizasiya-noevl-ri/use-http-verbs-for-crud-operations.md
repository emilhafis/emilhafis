# Use HTTP verbs for CRUD operations

![](../.gitbook/assets/CRUD\_1.png)

####

> As we saw before, HTTP verbs are used to specify the type of operation being performed on a resource.&#x20;
>
> Using dogs as our resource, let's discuss how we should map HTTP verbs for the required operations.

![](../.gitbook/assets/CRUD\_2.png)

> We can map these HTTP verbs to the four basic functions of persistent storage: Create, Read, Update and Delete.&#x20;
>
> We typically refer to these as "CRUD" operations.&#x20;
>
> CRUD is an acronym for Create, Read, Update, and Delete.

![](../.gitbook/assets/CRUD\_3.png)

> Remember that we have two primary URLs for our resources: "/dogs" refers to a collection of dogs, and "/dogs/1234" is the specific dog with the id 1234.&#x20;
>
> Let's see what CRUD operations can be performed on dogs using these HTTP verbs.

![](../.gitbook/assets/CRUD\_4.png)

> GET is the verb used to retrieve information about a collection of resources or a single resource. When you retrieve a web page in your browser, you are using the GET verb.&#x20;
>
> A GET should not update the state of the resource at all.&#x20;
>
> An operation that does not update the state is known as a safe method.&#x20;
>
> Unless another API call has modified the state of your resource between calls, repeating the same GET call will always produce the same result.&#x20;
>
> We call this being "idempotent."&#x20;
>
> HTTP specifies that GET should be safe and idempotent, so make sure your API adheres to these rules.

![](../.gitbook/assets/CRUD\_5.png)

> POST on "/dogs" is used to create a new dog. No id is provided in the URL; the id for the new dog should be automatically generated by the API.&#x20;
>
> The POST method modifies the state of resources, creating a new resource in the dogs collection. Therefore, POST is not a safe method.&#x20;
>
> Repeating the same POST call will result in multiple dogs being created, so POST is also not idempotent.&#x20;
>
> POSTing to a specific dog by id does not have a specific CRUD meaning.

![](../.gitbook/assets/CRUD\_6.png)

> For update, we have two methods listed: PUT and PATCH. We will focus on the differences between PUT and PATCH later.&#x20;
>
> "PUT /dogs/1234" would update Toto, the dog with id 1234.&#x20;
>
> If appropriate for your API, you can have PUT create a new resource with the specified id if one doesn't already exist. This is somewhat rare: typically this would only be used when the id of a resource is a unique number or string, like a product ID.&#x20;
>
> "PUT /dogs" would bulk update all dogs, or matching dogs if your request included a search or filter. Do not allow this operation unless it is necessary, because it might be too easy to accidentally bulk update lots of dogs.&#x20;
>
> PUT is not a safe method, because it is meant to update resources.&#x20;
>
> PUT, however, is specified by HTTP as an idempotent method. A second identical PUT call should therefore leave the resource or resources in the same state.

![](../.gitbook/assets/CRED\_9.png)

> The DELETE method is used to delete a resource.&#x20;
>
> "DELETE /dogs/1234" would delete a specific dog.&#x20;
>
> "DELETE /dogs" would delete all dogs, or all dogs that match the search or filters provided. Most APIs don't allow a DELETE on a collection, because it would be too easy to accidentally delete everything in the collection.&#x20;
>
> DELETE updates the state by removing resources, so it isn't safe. A second identical delete has no effect, since the resource was already deleted, so DELETE is idempotent.
